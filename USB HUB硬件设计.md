#### 所用芯片是SL2.1A，SOP-16封装

&emsp;&emsp;SL2.1A是一颗高集成度,高性能,低功耗的USB2.0 集线器主控芯片；该芯片采用STT技术,单电源供电方式，芯片供电电压为5v, 内部集成5V 转3.3V,只需在外部电源添加滤波电容；芯片自带复位电路，低功耗技术让他更加出众。芯片可以使用外部晶体，也可以使用内置晶体。如果使用内置晶体，需要将芯片的XI输入接地。建议您使用外部晶振，使用外部晶振更加稳定

#### 管脚图

<img src="pic\屏幕截图 2025-07-16 091211.png" alt="屏幕截图 2025-07-16 091211" style="zoom:40%;" />

##### 管脚定义

| 管脚名称 | 管脚号 | IO类型 |                             定义                             |
| :------: | :----: | :----: | :----------------------------------------------------------: |
|   DM4    |   1    |   B    |                     下行口4的USB DM信号                      |
|   DP4    |   2    |   B    |                     下行口4的USB DP信号                      |
|   DM3    |   3    |   B    |                     下行口3的USB DM信号                      |
|   DP3    |   4    |   B    |                     下行口3的USB DP信号                      |
|   DM2    |   5    |   B    |                     下行口2的USB DM信号                      |
|   DP2    |   6    |   B    |                     下行口2的USB DP信号                      |
|   DM1    |   7    |   B    |                     下行口1的USB DM信号                      |
|   DP1    |   8    |   B    |                     下行口1的USB DP信号                      |
|    DM    |   9    |   B    |                      上行口的USB DM信号                      |
|    DP    |   10   |   B    |                      上行口的USB DP信号                      |
|   VDD5   |   11   |   P    |                            5v输入                            |
|   GND    |   12   |   P    |                            芯片地                            |
|  VDD33   |   13   |   P    |                           内部3.3v                           |
|  VDD18   |   14   |   P    |                           内部1.8v                           |
|   XOUT   |   15   |   O    |                           晶振PAD                            |
|   XIN    |   16   |   I    | 晶振PAD（PAD指芯片的物理金属焊盘，强调这是直接连接外部晶振的硬件接口） |

注释：

> [!CAUTION]
>
> &emsp;&emsp;O输出；I 输入；B 双向；P 电源/接地；

> [!IMPORTANT]
>
> | 端口类型 |   数据流向   |     典型标识      |
> | :------: | :----------: | :---------------: |
> |  下行口  | 数据流出设备 | 通常标记为 LAN 口 |
> |  上行口  | 数据流入设备 | 通常标记为 WAN 口 |
>
> **DM和DP信号**
>
> &emsp;&emsp;核心概念：差分信号对，USB 2.0（以及之前的版本）使用**差分信号**进行高速数据传输；差分传输需要**两条**专门的信号线：**DP (Data Plus / D+)**: 数据正信号线，**DM (Data Minus / D-)**: 数据负信号线。这两条线总是成对出现，共同工作。
>
> &emsp;&emsp;差分传输原理：当发送数据 1时，DP 线上的电压会高于DM 线上的电压（一个正电压差），当发送数据 0 时，DP 线上的电压会低于 DM 线上的电压（一个负电压差）。
>
> &emsp;&emsp;接收端不是检测每条线对地的绝对电压，而是检测这两条线之间的**电压差**。这个差值决定了传输的是 1 还是 0。
>
> 主要优势：
>
> 1. 抗噪声干扰： 外部电磁干扰（EMI）通常会对两条紧挨着的线产生几乎相同的影响（共模噪声）。由于接收器只关心两条线之间的差值，这种共模噪声会被极大地抑制掉，从而显著提高信号在嘈杂环境中的可靠性。
>2. 降低电磁辐射： 两条线上电流方向相反，它们产生的磁场倾向于相互抵消，从而减少了电缆辐射的电磁干扰（EMI）。
> 3. 允许使用较低电压摆幅：由于检测的是差值，即使每条线的电压变化幅度较小，也能清晰地识别逻辑状态，有助于降低功耗。

### 电路设计

 <img src="pic\屏幕截图 2025-07-16 123905.png" alt="屏幕截图 2025-07-16 123905" style="zoom:40%;" />

> [!IMPORTANT]
>
> 1. **有关电源管脚接的滤波电容：**
>
>    &emsp;&emsp;什么是耦合：耦合，在物理学中，指两个或两个以上的体系或运动形式之间通过各种相互作用而彼此影响。如在两个单摆中间连一根线，它们的振动就会发生耦合。在电子学中，表示将能量从一个电路传输（传递）到另一个电路。如通过发光二极管可以把光能传递给光敏三极管、通过一个电感可以把磁能传递给另一个电感、通过一个电容可以把电能从电容的一端传递到电容的另一端，以上能量的传递，皆可称为耦合。
>
>    &emsp;&emsp;电容耦合：通过电容将交流信号的能量从一个电路传递到另一个电路，这是一种能量耦合方式。
>
>    &emsp;&emsp;回顾电容具有如下基本特性：电容通交流，隔直流；电容通高频，阻低频。
>
>    <img src="pic\去耦电容.png" alt="去耦电容" style="zoom:50%;" />
>
>    &emsp;&emsp;利用电容**通交流，隔直流；通高频，阻低频**的基本特性，我们将电容靠近后级电路并与之并联（上图），那么这个并联的电容，就是去耦（旁路）电容，其主要作用如下三点：
>
>    a. **旁路前级电路输入的高频交流噪声，阻碍其传输到后级电路，让直流或低频信号通过，起到去耦噪声，滤除干扰的目的**。
>
>    b. **旁路后级电路反向输出的高频交流噪声（电源和地噪声），阻碍其传输到前级电路，起到去耦电源和地噪声，滤除干扰的目的**。
>
>    c. **为后级电路储能稳压。当前级电路出现电压暂降、短时中断以及电压渐变时，由该电容上存储的电荷继续为后级电路供电，起到稳定电压的作用；另一方面，正是由于该电容具有储能的作用，才能满足后级电路的瞬时突变电流之用电需求**。
>
>    &emsp;&emsp;此处用到的电容主要是滤波的作用，将前级电源电路输入的高频交流噪声接地去除，同时阻碍后级电路输出的高频交流噪声到前级电路。
>
>    
>
>    参考链接：
>
>    [1] https://blog.csdn.net/qq_38636482/article/details/125280489 彻底搞懂：什么是耦合电容？什么是去耦电容？什么是旁路电容？
>
>    [2] https://blog.csdn.net/chenhuanqiangnihao/article/details/113991687 电容-去耦和退耦的注意事项
>
>    
>
>    2. **有关XIN，XOUT管脚接线：**
>
>       &emsp;&emsp;基本定义：XIN晶体振荡器输入脚，接收外部晶振产生的时钟信号（或连接有源晶振的输出端）；XOUT晶体振荡器输出脚，向外部晶振反馈驱动信号（配合无源晶振时使用）。
>
>       &emsp;&emsp;晶振概述：晶振（Crystal Oscillator）是指石英晶体谐振器和振荡器的统称，是利用石英晶体的压电效应来产生稳定频率的电子元件。晶振的主要功能是提供稳定的频率信号，常用于电路中的时钟模块，为系统提供基本的时钟信号。通常一个系统共用一个晶振，便于各部分保持同步。没有晶振，系统将无法正常稳定运行。晶振通常与锁相环电路配合使用，以提供系统所需的时钟频率。如果不同子系统需要不同频率的时钟信号，可以用与同一个晶振相连的不同锁相环来提供。、
>
>       &emsp;&emsp;晶振通常分为**无源晶振**和**有源晶振**两种类型，无源晶振是一种不含内部振荡电路的晶体，利用石英晶体的压电效应在外加电压作用下振动，产生特定频率的信号，一般称之为晶体谐振器（Crystal）；而有源晶振是内部自带振荡电路的晶体振荡器，直接供电就能够直接输出稳定的振荡信号，无需依赖外部起振电路来产生信号，一般称之为晶体振荡器(Oscillator)。
>
>       <img src="pic\无源晶振和有源晶振.png" alt="无源晶振和有源晶振" style="zoom:50%;" />
>
>       |        特性        |           无源晶振           |        有源晶振        |
>       | :----------------: | :--------------------------: | :--------------------: |
>       | 是否有内部振荡电路 |              否              |           是           |
>       |  是否需要外部电路  | 是(如起振电路、匹配负载电容) |           否           |
>       |  是否需要外部供电  |              否              |    是（如3.3V、5V）    |
>       |      输出信号      |   需要外部电路，无直接输出   | 直接输出稳定的频率信号 |
>       |      启动时间      |              慢              |           快           |
>       |     抗干扰能力     |              弱              |           强           |
>       |        功耗        |             较低             |          较高          |
>       |        成本        |             较低             |          较高          |
>
>       &emsp;&emsp;晶振电路介绍：晶振电路是一种用于产生准确稳定时钟信号的电路，晶振两端通常并联连接两个电容，每个电容的另一端再连接到地，将形成一个正弦波振荡电路（**皮尔斯振荡器电路**）。
>
>       <img src="pic\屏幕截图 2025-07-16 133106.png" alt="屏幕截图 2025-07-16 133106" style="zoom:50%;" />
>
>       - RF：内部反馈电阻，Inv：内部反相放大器，X1：晶振，CL1和CL2：晶振输入输出两端的匹配电容，Cs：OSC_IN和OSC_OUT引脚间的寄生杂散电容，一般无法抵消，只能减少，每个厂家晶振的这个值也会有所不同，一般取3pF～5pF。
>
>       **负载电容计算公式：**CL=(CL1\*CL2)/(CL1+CL2)+Cs，一般实际使用CL1都会等于CL2，即CL1=CL2，一般负载电容CL可在器件的数据手册上可以查到，寄生杂散电容Cs≈静态电容C0也可以在数据手册上查到。
>
>       **经典无源晶振电路如下图所示：**
>
>       <img src="pic\无源晶振电路.png" alt="无源晶振电路" style="zoom:50%;" />
>
>       
>
>       参考链接：
>
>       [1] https://wiki.lceda.cn/zh-hans/design-production/pcb-design/practical-circuit/crystal-oscillator-circuit.html .晶振电路设计

